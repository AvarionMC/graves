config-version: 2 # Don't change this!

settings:
  # You can customize everything in this plugin, certain configurations may break the plugin.
  # Say for example you disable every way to access a grave, or make it so graves never spawn.
  # Be mindful while editing the config, it is very powerful. I put comments on most options to help.
  # If something is not working as expected please report it in the discussion.
  # https://www.spigotmc.org/resources/graves.74208/

  # To disable messages, sounds and effects set them to ""
  # To find out what a config option does, scroll down to the default options section, options are there with text explaining what each one does.

  storage:
    type: SQLITE
    sqlite:
      journal-mode: "WAL" # https://www.sqlite.org/pragma.html#pragma_journal_mode
      synchronous: "OFF" # https://www.sqlite.org/pragma.html#pragma_synchronous

  ##################
  # Global Options #
  ##################
  debug: false # Show debug messages in console.

  #################
  # Placeholders #
  ################
  # These placeholders relate to the current grave in messages.
  # %uuid% - UUID
  # %owner_name% - Owner name
  # %owner_type% - Owner type
  # %owner_uuid% - Owner UUID
  # %killer_name% - Killer name
  # %killer_type% - Killer type
  # %killer_uuid% - Killer UUID
  # %interact_name% - Interact name
  # %interact_type% - Interact type
  # %interact_uuid% - Interact UUID
  # %item% - Item amount
  # %experience% - Experience amount
  # %level% - Level amount
  # %time_alive_remaining% - Remaining alive time
  # %time_alive_remaining_formatted% - Remaining alive time formatted
  # %time_protection_remaining% - Remaining protection time
  # %time_protection_remaining_formatted% - Remaining protection time formatted
  # %time_lived% - Lived time
  # %time_lived_formatted% - Lived time formatted
  # %world% - World name
  # %x% - X cord
  # %y% - Y cord
  # %z% - Z cord

  ###############################
  # PlaceholderAPI Placeholders #
  ###############################
  # These placeholders can be used in any plugin that supports PlaceholderAPI. <UUID> is the graves UUID
  # %graves_author% - Plugin author
  # %graves_version% - Plugin version
  # %graves_count% - Grave count for player
  # %graves_owner_name_<UUID>% - Grave owner name
  # %graves_owner_type_<UUID>% - Grave owner type
  # %graves_owner_uuid_<UUID>% - Grave owner UUID
  # %graves_killer_name_<UUID>% - Grave killer name
  # %graves_killer_type_<UUID>% - Grave killer type
  # %graves_killer_uuid_<UUID>% - Grave killer UUID
  # %graves_item_<UUID>% - Item amount
  # %graves_experience_<UUID>% - Experience amount
  # %graves_level_<UUID>% - Level amount
  # %graves_time_alive_remaining_<UUID>% - Remaining alive time
  # %graves_time_alive_remaining_formatted_<UUID>% - Remaining alive time formatted
  # %graves_time_protection_remaining_<UUID>% - Remaining protection time
  # %graves_time_protection_remaining_formatted_<UUID>% - Remaining protection time formatted
  # %graves_time_lived_<UUID>% - Lived time
  # %graves_time_lived_formatted_<UUID>% - Lived time formatted

  ###############
  # Token Setup #
  ###############
  # Here is where you define your tokens that you can use in graves. Supported only on 1.12+
  token:
    basic: # Token name, you can define multiple tokens.
      material: SUNFLOWER # https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/Material.html
      name: "Grave Token" # Grave token name.
      craft: true # Can players craft this grave token.
      lore: # Grave token lore.
        - "&7Keep this in your inventory and"
        - "&7when you die a grave will be"
        - "&7created."
      recipe: # Grave token recipe, use AIR for an empty square, make sure it is uinque.
        - "GOLD_INGOT GOLD_INGOT GOLD_INGOT"
        - "GOLD_INGOT EMERALD GOLD_INGOT"
        - "GOLD_INGOT GOLD_INGOT GOLD_INGOT"

  #######################
  # Permission Override #
  #######################
  # Override default config options for players who have these permissions, "graves.permission.{name}".
  # If a player has multiple permissions, by group inheritance or manually given, options will be chosen from the top down.
  # Meaning for example, since admin is at the top and if the player has this permission among others.
  # The admin permission will always override permissions below it, therefore you should put your highest permission groups at the top,
  # so they correctly override in a hierarchy, this prevents you having to define the same thing for each permission group.
  permission:
    # admin, vip, schem and disabled are examples, you can modify them or make your own.
    admin: # graves.permission.admin
      grave:
        time: -1
      block:
        material: BEDROCK
      world:
        - ALL

    vip: # graves.permission.vip
      grave:
        time: 21600
        explode: false
      block:
        material: BEACON
      gui:
        grave:
          title: "VIP %owner_name%'s Grave"

    schem: # graves.permission.schem
      placement:
        offset:
          y: 1
      hologram:
        line:
          - "&c☠ &rHere Lies &2%owner_name% &c☠"
          - "&rKilled by &c%killer_name%"
      schematic:
        enabled: true
        name: "grave_default"

    disabled: # graves.permission.disabled
      grave:
        enabled: false

  ###################
  # Entity Override #
  ###################
  # Override default config options for entities that match these types, entity type names must be uppercase.
  # https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/entity/EntityType.html
  entity:
    # Here we override the options for PLAYER, ENDER_DRAGON and WITHER. ENDER_DRAGON and WITHER are disabled by default.
    PLAYER: # Override default options for Players.
      grave:
        enabled: true
        time: 10800
      protection:
        enabled: false
        time: 300
        open:
          owner: true
          killer: true
          other: false
          missing:
            owner: true
            other: false
      hologram:
        enabled: true
        line:
          - "&7%owner_name% &c☠"
          - "&r%item% &7items &r/ &r%level% &7levels"
          #- "&r%item% &7items &r/ &r%level% &7levels &r%state_protection%" # With Protection
          - "&7Killed &fby &c%killer_name%"
          - "%time_alive_remaining_formatted%"
      world:
        - ALL
      death:
        reason:
          - ALL

    ENDER_DRAGON: # Override default options for Ender Dragons.
      grave:
        enabled: false
        time: -1
        explode: false
      block:
        material: DRAGON_HEAD
      gui:
        grave:
          title: "%owner_name% Corpse"
      command:
        create:
          - "say %killer_name% killed the %owner_name%."
      world:
        - world_the_end
        - ALL
      death:
        reason:
          - ALL

    WITHER: # Override default options for Withers.
      grave:
        enabled: false
        time: -1
        explode: false
      block:
        enabled: false
      gui:
        grave:
          title: "%owner_name% Corpse"
      schematic:
        enabled: true
        name: "grave_wither"
      world:
        - world
        - ALL
      death:
        reason:
          - ALL

  ###################
  # Default Options #
  ###################
  # Below are the default options for graves that are not overridden above, any options not defined above will take from here.
  # You can copy options below above into an entity section or a permission group, it has the same indentation.
  default:
    default:
      #########
      # Grave #
      #########
      grave:
        enabled: false # Should graves be enabled by default, if set to true under default all living entities will create graves.
        time: 300 # (Second) How long graves should stay alive for, 300 = 5 minutes, 10800 = 3 hours, -1 lasts forever.
        max: 18 # The max amount of graves an entity can have.
        break: true # Can graves be broken.
        explode: true # Can graves be blown up.

      ########
      # Drop #
      ########
      # Should a grave drop it's contents when destroyed for the following reasons.
      drop:
        timeout: true # When a grave times out drop everything in it. If false it gets destroyed.
        explode: true # When a grave explodes drop everything in it. If false it gets destroyed.
        break: true # When a grave is broken drop everything in it. If false it gets destroyed.

      #########
      # World #
      #########
      # What worlds will a grave will spawn in.
      world:
        - world
        - world_nether
        - world_the_end
        #- ALL

      #########
      # Block #
      #########
      # Grave block options, this can be disabled if you only want holograms.
      block:
        enabled: true # Should grave blocks be enabled.
        material: PLAYER_HEAD # Material: PLAYER_HEAD, CHEST, BEACON (AIR to disable)
        rotation: 1 # If skulls are used, when calculating the direction the entity was looking, should it be 4 directions, or 8.
        offset:
          x: 0 # Block offset X.
          y: 0 # Block offset Y.
          z: 0 # Block offset Z.
        walk-over: false # Should graves be looted if the block is walked over.
        head:
          type: 0 # 0 = Player/Entity head, (1 = Custom texture or 2 = Player username set under headSkin).
          base64: "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYjdjYWI1NmM4MmNiODFiZGI5OTc5YTQ2NGJjOWQzYmEzZTY3MjJiYTEyMmNmNmM1Mjg3MzAxMGEyYjU5YWVmZSJ9fX0="
          name: "MHF_Chest" # If headSkinType is set to 2.

      #############
      # Placement #
      #############
      # How grave blocks or holograms are placed.
      placement:
        can-build: true # Only create graves where the entity can build, should work with all protection plugins.
        ground: true # If the entity dies in the air should the grave fall to the ground.
        lava-top: true # If the entity dies in lava should the grave it float to the top.
        lava-smart: true # If the entity died in lava, try place the grave on the last solid block they stood on. (Only works for players)
        void: true # If the entity died in the void, should it place a grave in the air if it can't find anywhere else.
        void-smart: true # If the player died in the void, try place the grave on the last solid block they stood on. (Only works for players)
        offset:
          x: 0 # Placement offset X, this will affect all other offsets.
          y: 0 # Placement offset Y, this will affect all other offsets.
          z: 0 # Placement offset Z, this will affect all other offsets.

      ###########
      # Respawn #
      ###########
      respawn:
        compass: true
        compass-time: 30 # How long should the entity be given a compass on respawn after the grave was first created.
        function: "none" # Should we run a function after respawning, you can use menu and list among the other functions.

      ###########
      # Compass #
      ###########
      # Only supported on 1.16.2+.
      compass:
        enabled: true # Should entities be given a compass to their last grave when they respawn. (Only works for players)
        function: "distance" # The function that gets run on right click.
        ignore: true # Ignore the compass if an entity dies with it, drop it normally.
        destroy: true # Should a previous compass be destroyed when creating a new grave.
        name: "%owner_name%'s Grave"
        lore:
          - "%world%, %x%x, %y%y, %z%z"

      #############
      # Schematic #
      #############
      # Schematic options, this feature is in beta. Schematics don't get cleaned up when the grave is removed.
      schematic:
        enabled: false # Should schematics be enabled.
        name: "grave_default" # Schematic file name.
        offset:
          x: 0 # Schematic offset X.
          y: 0 # Schematic offset Y.
          z: 0 # Schematic offset Z.

      ############
      # Hologram #
      ############
      # If you are running PaperMC you can set armor-stands-tick to false for improved performance without impacting any function.
      hologram:
        enabled: false # Should holograms be created.
        height: 0.28 # Height the hologram spawns.
        height-line: 0.28 # How far apart should holograms be from each-other.
        offset:
          x: 0 # Block offset X.
          y: -0.28 # Block offset Y.
          z: 0 # Block offset Z.
        line:
          - "%owner_name% &c☠"

      ############
      # Particle #
      ############
      particle:
        enabled: false # Enable the particles feature.
        type: "REDSTONE" # https://hub.spigotmc.org/javadocs/spigot/org/bukkit/Particle.html
        count: 4 # Amount of particles.
        dust-size: 4 # Only applies to REDSTONE.
        dust-color: "RED" # only applies to REDSTONE, https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/Color.html
        offset:
          x: 0 # Particle offset X.
          y: 0 # Particle offset Y.
          z: 0 # Particle offset Z.

      ##############
      # Protection #
      ##############
      protection:
        enabled: false # Enable the grave protection feature.
        time: 5 # Seconds, 300 = 5 minutes. Set to -1 to always stay locked.
        open:
          owner: true # Can the owner open the owners grave.
          killer: false # Can the killer open the owners grave.
          other: false # Can other entities open the owners grave.
          missing:
            owner: true # If a killer can't be found should the owner be allowed to open the grave.
            other: false # If a killer can't be found should everyone be allowed to open the grave.
        state:
          protected: "&c✘"
          unprotected: "&a✔"

      ##############
      # Experience #
      ##############
      # If expStore is false it will store what Minecraft would normally drop, if you want to fully disable it, set expStore to true and expStorePercent to 0.
      experience:
        store: true # Should all the entities EXP be stored in the grave. If false only the vanilla drop amount will be stored.
        store-percent: 0.8 # How much of the EXP should be stored, 0.8 = 80%, 1 = 100%, 0 = 0%.

      ############
      # Teleport #
      ############
      teleport:
        enabled: true # Can the entity teleport to their grave from the Graves GUI.
        cost: 5 # How much it costs to teleport to a grave, you need Vault for this.
        cost-different-world: 20 # Extra cost added on top of cost if the grave is in a different world.
        cost-distance-increase: true # Increase the price the further away the grave is.
        unsafe: false # Should entities be allowed to always teleport to a grave even if unsafe.
        top: true # If the grave is in an unsafe location, should the entity be teleported to the top.
        top-nether: false # Should entities be teleported to the top of the nether.

      ###########
      # Virtual #
      ###########
      virtual:
        distance: 15 # Minimum distance entities need to be from a grave to open it virtually. -1 for infinite distance.

      #######
      # GUI #
      #######
      # Functions: none, list, menu, teleportation, protection
      gui:
        grave:
          title: "%owner_name%'s Grave"

        menu:
          list:
            item:
              block: true # Should we use options under block for the menu item?
              material: CHEST # Item if block is false or can't be found.
            title: "Grave List"
            function: "menu" # Open the menu by default, if you don't want to use the menu you can change this to none or any other valid function.
            name: "Grave"
            empty: "You don't have any graves."
            lore:
              - "Created &f%time_lived_formatted% &7ago"

          grave:
            title: "Grave Menu"
            slot:
              0:
                material: "PAPER"
                function: "distance"
                name: "Information"
                lore:
                  - "Items: &f%item%"
                  - "Levels: &f%level%"
                  - "Death Location: &f%world%, %x%x, %y%y, %z%z"

              1:
                material: "ENDER_PEARL"
                function: "teleportation"
                name: "Teleport"
                lore:
                  - "Teleport to your grave"

              #2: # Toggle protection on and off, you can uncomment this if you want
              #  material: "TRIPWIRE_HOOK"
              #  function: "protection"
              #  name: "Toggle Protection %state_protection%"
              #  lore:
              #    - "Toggle grave protection"

      ##########
      # Zombie #
      ##########
      zombie:
        type: ZOMBIE # https://hub.spigotmc.org/javadocs/spigot/org/bukkit/entity/LivingEntity.html
        name: "%owner_name%'s Zombie"
        spawn-owner: false # Should a grave spawn a zombie when it is looted by its owner.
        spawn-other: true # Should a grave spawn a zombie if it is looted by another player.
        only-break: false # Should a zombie only spawn if the player broke the grave not open it.
        explode: false # Should a grave spawn a zombie if it is blown up, this only works if the grave can be blown up.
        owner-head: true # Will the zombie have the owners head on.
        health: 20 # How much health the zombie has.
        pickup: false # Can the zombie pickup dropped items.
        drop: false # Do grave zombies drop items, this may include the head it is wearing.

      #########
      # Token #
      #########
      token: # You have to define the token at the top of the config file.
        enabled: false # Should graves require tokens for their creation.
        name: "basic" # Name of the token defined in token setup.

      ###########
      # Message #
      ###########
      message:
        prefix: "&7☠ &8» &r"
        loot: ""
        experience: "Looted &7%level% &rlevels from grave."
        empty: "You don't have any graves."
        death: "You died in &7%world% &rat &7%x%&rx, &7%y%&ry, &7%z%&rz, a grave was created that lasts for &7%time_alive_remaining_formatted%&r."
        ignore: "A grave was not created because you died in &7%name%&r."
        max: "A grave was not created, you have reached the maximum."
        failure: "A grave was unable to be placed, item's dropped on ground."
        no-money: "You don't have enough money, you need &7%teleport_cost%&r."
        no-token: "A grave was not created because you didn't have a grave token."
        give-token: "You were given a Grave Token."
        distance: "You are &7%distance% &rblocks away."
        distance-world: "Can't measure distance, wrong world."
        teleport: "You teleported to your grave."
        teleport-top: "Grave is in an unsafe location, you have been teleported nearby."
        teleport-failure: "Teleport failed, teleport location is unsafe."
        teleport-disabled: "Grave teleportation is disabled."
        build-denied: "A grave was not created because you don't have permission to build where you died."
        distance-virtual: "You are too far away to virtually open this grave."
        permission-denied: "Permission denied."
        protection: "This grave is protected for %time_protection_remaining_formatted%."
        worldguard-create-deny: "A grave was not created because grave creation is disabled in this region."
        worldguard-teleport-deny: "Grave teleportation is disabled in this region."

      ########
      # Time #
      ########
      time:
        second: "&7%second%&fs "
        minute: "&7%minute%&fm "
        hour: "&7%hour%&fh "
        day: "&7%day%&fd "
        infinite: "&7Forever"

      #########
      # Sound #
      #########
      sound:
        open: BLOCK_CHEST_OPEN
        close: BLOCK_CHEST_CLOSE
        loot: ENTITY_DONKEY_CHEST
        teleport: ENTITY_ENDERMAN_TELEPORT
        menu-open: ENTITY_CHICKEN_EGG
        protection: BLOCK_CHEST_LOCKED
        protection-change: ENTITY_DONKEY_CHEST

      ##########
      # Effect #
      ##########
      effect:
        loot: MOBSPAWNER_FLAMES

      ###########
      # Command #
      ###########
      # Run commands on grave actions.
      command:
        loot:
          - ""
          #- "say %interact_name% looted %owner_name%'s grave"
        create:
          - ""
          #- "say %owner_name% was killed by %killer_name% at %x%x %y%y %z%z, grave lasts for %time_alive_remaining_formatted%."
        open:
          - ""
          #- "say %interact_name% is looting %owner_name%'s grave."
        break:
          - ""
          #- "say %interact_name% broke %owner_name%'s grave."
        explode:
          - ""
          #- "say %interact_name% exploded %owner_name%'s grave."
        teleport:
          - ""
          #- "say %interact_name% teleported to %owner_name%'s grave."

      ##########
      # Ignore #
      ##########
      ignore:
        item: # Items that graves will ignore from the inventory, these items will be handled normally.
          material:
            - ""
            #- BEDROCK  # https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/Material.html
          name: # If an item has this exact name it will be handled normally.
            - ""
            #- "&4Admin Sword"
          lore: # If an item has this exact line of lore it will be handled normally.
            - ""
            #- "Soulbound"
          name-contains: # If an item contains this string in the name it will be handled normally.
            - ""
            #- "Super Pickaxe"
          lore-contains: # If an item contains this string in the lore it will be handled normally.
            - ""
            #- "Ignore Lore"
        block: # Blocks that graves will not spawn in.
          material:
            - ""
            #- LAVA

      ###########
      # Replace #
      ###########
      replace:
        block: # What blocks can graves replace.
          not-solid: true # Replace non-solid blocks

      #########
      # Death #
      #########
      death:
        player: true # Create a grave if an entity dies to a player.
        entity: false # Create a grave if an entity dies to an entity.
        environmental: false # Create a grave if an entity dies to things such as fall damage, lava and suffocation.
        reason: # Only create graves for entities that were killed for these reasons. https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/EntityDamageEvent.DamageCause.html
          #- CONTACT
          - ENTITY_ATTACK
          - ENTITY_SWEEP_ATTACK
          #- PROJECTILE
          #- SUFFOCATION
          #- FALL
          #- FIRE
          #- FIRE_TICK
          #- MELTING
          #- LAVA
          #- DROWNING
          #- BLOCK_EXPLOSION
          #- ENTITY_EXPLOSION
          #- VOID
          #- LIGHTNING
          #- SUICIDE
          #- STARVATION
          #- POISON
          #- MAGIC
          #- WITHER
          #- FALLING_BLOCK
          #- THORNS
          #- DRAGON_BREATH
          #- CUSTOM
          #- FLY_INTO_WALL
          #- HOT_FLOOR
          #- CRAMMING
          #- DRYOUT
          #- FREEZE
          #- ALL

      #########
      # Spawn #
      #########
      # https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/CreatureSpawnEvent.SpawnReason.html
      spawn: # Only create graves for creature entities that have a spawn reason from the list below.
        reason:
          - NATURAL
          - DEFAULT
          - JOCKEY
          - CHUNK_GEN
          - EGG
          - SPAWNER_EGG
          - LIGHTNING
          - BUILD_SNOWMAN
          - BUILD_IRONGOLEM
          - BUILD_WITHER
          - VILLAGE_DEFENSE
          - VILLAGE_INVASION
          - BREEDING
          - SLIME_SPLIT
          - REINFORCEMENTS
          - NETHER_PORTAL
          - DISPENSE_EGG
          - INFECTION
          - CURED
          - OCELOT_BABY
          - SILVERFISH_BLOCK
          - MOUNT
          - TRAP
          - ENDER_PEARL
          - SHOULDER_ENTITY
          - DROWNED
          - SHEARED
          - EXPLOSION
          - RAID
          - PATROL
          - BEEHIVE
          - PIGLIN_ZOMBIFIED
          - COMMAND
          - CUSTOM
          #- SPAWNER
          #- ALL